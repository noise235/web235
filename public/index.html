<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impossible Arbitrage System - MVP</title>
    <link rel="stylesheet" href="../src/css/styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Impossible Arbitrage System</h1>
            <p>Advanced multi-market arbitrage opportunities detection and execution platform</p>
        </div>

        <!-- Dashboard Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <div class="status-value" id="activeStrategies">0</div>
                <div class="status-label">æ´»è·ƒç­–ç•¥</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="totalOpportunities">0</div>
                <div class="status-label">å¥—åˆ©æœºä¼š</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="todayProfit">+0.00%</div>
                <div class="status-label">ä»Šæ—¥æ”¶ç›Š</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="totalBalance">$0</div>
                <div class="status-label">æ€»èµ„äº§</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="successRate">0.0%</div>
                <div class="status-label">ç­–ç•¥æˆåŠŸç‡</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="systemStatus">ğŸŸ¢</div>
                <div class="status-label">ç³»ç»ŸçŠ¶æ€</div>
            </div>
        </div>

        <!-- Main Content Tabs -->
        <div class="main-content">
            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <button class="tab-button active" onclick="showTab('dashboard')">Dashboard</button>
                <button class="tab-button" onclick="showTab('market-monitoring')">Market Monitoring</button>
                <button class="tab-button" onclick="showTab('order-records')">Order Records</button>
                <button class="tab-button" onclick="showTab('rules-settings')">Rules Settings</button>
            </div>

            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="section-header">
                    <h2>Dashboard Overview</h2>
                </div>
                
                <div class="controls-panel">
                    <h3 style="margin-bottom: 15px; color: #fff;">æ´»è·ƒç­–ç•¥ç›‘æ§</h3>
                    <div id="activeStrategiesContent">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p>Loading active strategies...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Market Monitoring Tab -->
            <div id="market-monitoring" class="tab-content">
                <div class="section-header">
                    <h2>Market Monitoring</h2>
                </div>
                
                <!-- Enhanced Market Monitoring Controls -->
                <div class="controls-panel">
                    <div class="filter-section-title">åŸºç¡€ç­›é€‰</div>
                    <!-- ç¬¬ä¸€è¡Œï¼šåŸºç¡€ç­›é€‰ -->
                    <div class="controls-row">
                        <div class="control-group">
                            <label for="arbitrageType">å¥—åˆ©ç±»å‹</label>
                            <select id="arbitrageType">
                                <option value="futures-futures" selected>æœŸæœŸå¥—åˆ©</option>
                                <option value="futures-spot" disabled>æœŸç°å¥—åˆ©</option>
                                <option value="spot-spot" disabled>ç°ç°å¥—åˆ©</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="minSpread">æœ€å°ä»·å·® (%)</label>
                            <input type="number" id="minSpread" value="0.05" step="0.01" min="0">
                        </div>
                        <div class="control-group">
                            <label for="minProfit">æœ€å°åˆ©æ¶¦ (%)</label>
                            <input type="number" id="minProfit" value="0.02" step="0.01" min="0">
                        </div>
                        <div class="control-group">
                            <label for="symbolFilter">äº¤æ˜“å¯¹</label>
                            <select id="symbolFilter">
                                <option value="">å…¨éƒ¨äº¤æ˜“å¯¹</option>
                                <option value="BTC-USDT">BTC-USDT</option>
                                <option value="ETH-USDT">ETH-USDT</option>
                                <option value="ADA-USDT">ADA-USDT</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="filter-section-title">äº¤æ˜“æ‰€è®¾ç½®</div>
                    <!-- ç¬¬äºŒè¡Œï¼šå¢å¼ºç­›é€‰ -->
                    <div class="controls-row">
                        <div class="control-group">
                            <label for="exchangeA">Buyäº¤æ˜“æ‰€</label>
                            <select id="exchangeA">
                                <option value="">è¯·é€‰æ‹©</option>
                                <option value="binance">Binance</option>
                                <option value="okx">OKX</option>
                                <option value="bybit">Bybit</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="exchangeB">Selläº¤æ˜“æ‰€</label>
                            <select id="exchangeB">
                                <option value="">è¯·é€‰æ‹©</option>
                                <option value="binance">Binance</option>
                                <option value="okx">OKX</option>
                                <option value="bybit">Bybit</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="fundingPeriod">èµ„é‡‘è´¹å‘¨æœŸ</label>
                            <select id="fundingPeriod">
                                <option value="">ä¸é™åˆ¶</option>
                                <option value="8h">8å°æ—¶</option>
                                <option value="4h">4å°æ—¶</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="openSpreadThreshold">ç›˜å·® (%)</label>
                            <input type="number" id="openSpreadThreshold" value="0.06" step="0.01" min="0">
                        </div>
                    </div>
                    
                    <div class="filter-section-title">æ“ä½œæ§åˆ¶</div>
                    <!-- ç¬¬ä¸‰è¡Œï¼šæ“ä½œæŒ‰é’® -->
                    <div class="controls-row">
                        <button class="btn btn-primary" onclick="scanOpportunities()">
                            <span class="spinner" id="scanSpinner" style="display: none;"></span>
                            æ‰«ææœºä¼š
                        </button>
                        <button class="btn btn-success" id="autoTradingBtn" onclick="enableAutoTrading()">å¯åŠ¨è‡ªåŠ¨äº¤æ˜“</button>
                        <button class="btn btn-secondary" onclick="saveFilters()">ä¿å­˜ç­›é€‰</button>
                    </div>
                </div>
                
                <div id="opportunitiesContent">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading opportunities...</p>
                    </div>
                </div>
            </div>

            <!-- Order Records Tab -->
            <div id="order-records" class="tab-content">
                <div class="section-header">
                    <h2>Order Records Management</h2>
                </div>
                
                <!-- Order Records Controls -->
                <div class="controls-panel">
                    <div class="controls-row">
                        <div class="control-group">
                            <label for="orderTimeRange">æ—¶é—´èŒƒå›´</label>
                            <select id="orderTimeRange">
                                <option value="today">ä»Šæ—¥</option>
                                <option value="week" selected>æœ€è¿‘7å¤©</option>
                                <option value="month">æœ€è¿‘30å¤©</option>
                                <option value="custom">è‡ªå®šä¹‰</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="orderSymbolFilter">äº¤æ˜“å¯¹</label>
                            <select id="orderSymbolFilter">
                                <option value="">å…¨éƒ¨äº¤æ˜“å¯¹</option>
                                <option value="BTC-USDT">BTC-USDT</option>
                                <option value="ETH-USDT">ETH-USDT</option>
                                <option value="ADA-USDT">ADA-USDT</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="orderStatusFilter">çŠ¶æ€</label>
                            <select id="orderStatusFilter">
                                <option value="">å…¨éƒ¨çŠ¶æ€</option>
                                <option value="active">è¿è¡Œä¸­</option>
                                <option value="closed">å·²å…³é—­</option>
                                <option value="pending_close">å¾…å…³é—­</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="orderExchangeFilter">äº¤æ˜“æ‰€</label>
                            <select id="orderExchangeFilter">
                                <option value="">å…¨éƒ¨äº¤æ˜“æ‰€</option>
                                <option value="binance">Binance</option>
                                <option value="okx">OKX</option>
                                <option value="bybit">Bybit</option>
                            </select>
                        </div>
                    </div>
                    <div class="controls-row">
                        <button class="btn btn-primary" onclick="refreshOrderRecords()">
                            åˆ·æ–°è®¢å•
                        </button>
                        <button class="btn btn-secondary" onclick="exportOrderRecords()">
                            å¯¼å‡ºæ•°æ®
                        </button>
                    </div>
                </div>
                
                <div id="orderRecordsContent">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading order records...</p>
                    </div>
                </div>
            </div>

            <!-- Rules Settings Tab -->
            <div id="rules-settings" class="tab-content">
                <div class="section-header">
                    <h2>Rules Configuration</h2>
                </div>
                
                <div class="controls-panel">
                    <div class="controls-row">
                        <button class="btn btn-primary" onclick="openRulesModal()">
                            æ–°å»ºè§„åˆ™
                        </button>
                        <button class="btn btn-success" onclick="useTemplate()">
                            ä½¿ç”¨æ¨¡æ¿
                        </button>
                        <button class="btn btn-secondary" onclick="exportRules()">
                            å¯¼å‡ºè§„åˆ™
                        </button>
                        <button class="btn btn-secondary" onclick="importRules()">
                            å¯¼å…¥è§„åˆ™
                        </button>
                    </div>
                </div>
                
                <div id="rulesContent">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading rules configuration...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Position Opening Modal -->
    <div id="positionModal" class="trade-modal">
        <div class="modal-content" style="width: 600px; max-width: 95%;">
            <div class="modal-header">
                <h3>å¼€ä»“å¥—åˆ©ä½ç½®</h3>
                <span class="close" onclick="closePositionModal()">&times;</span>
            </div>
            <div id="positionModalBody">
                <!-- Position details will be populated here by main.js -->
            </div>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="detailsModal" class="trade-modal">
        <div class="modal-content" style="width: 800px; max-width: 95%;">
            <div class="modal-header">
                <h3>å¥—åˆ©è¯¦æƒ…</h3>
                <span class="close" onclick="closeDetailsModal()">&times;</span>
            </div>
            <div id="detailsModalBody">
                <!-- Details will be populated here by main.js -->
            </div>
        </div>
    </div>

    <!-- Close Position Modal -->
    <div id="closePositionModal" class="trade-modal">
        <div class="modal-content" style="width: 500px; max-width: 95%;">
            <div class="modal-header">
                <h3>å¹³ä»“äº¤æ˜“</h3>
                <span class="close" onclick="closeClosePositionModal()">&times;</span>
            </div>
            <div id="closePositionModalBody">
                <!-- Close position form will be populated here by main.js -->
            </div>
        </div>
    </div>

    <!-- Rules Editing Modal -->
    <div id="rulesModal" class="trade-modal">
        <div class="modal-content" style="width: 1200px; max-width: 95%;">
            <div class="modal-header">
                <h3>è§„åˆ™è°ƒæ•´</h3>
                <span class="close" onclick="closeRulesModal()">&times;</span>
            </div>
            <div id="rulesModalBody">
                 <!-- Rules form will be loaded here, or defined statically -->
            </div>
        </div>
    </div>


    <!-- Include all modals and scripts -->
    <script src="../src/js/config.js"></script>
    <script src="../src/js/api.js"></script>
    <script src="../src/js/utils.js"></script>
    <script src="../src/js/components.js"></script>
    <script src="../src/js/main.js"></script>
</body>
</html>
